webpackJsonp([1],{CpP7:function(e,s){},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("7+uW"),n=t("1I9z"),o=t("Gu7T"),a=t.n(o),i={render:function(){var e=this.$createElement;return(this._self._c||e)("button",{staticClass:"btn",on:{click:this.onClick}},[this._t("default")],2)},staticRenderFns:[]};var l=t("VU/8")({name:"Btn",methods:{onClick:function(){this.$emit("click")}}},i,!1,function(e){t("mrAD")},"data-v-c11c7eea",null).exports,u=t("mvHQ"),c=t.n(u),m={name:"UsersList",props:{users:{type:Array,required:!0}}},d={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",{staticClass:"users"},e._l(e.users,function(s){return t("li",{key:s.id,staticClass:"user"},[t("div",{staticClass:"user__info-wrapper"},[t("div",{staticClass:"user__info user-info--name"},[t("div",{staticClass:"user__is-boss"},[e._v(e._s(s.isBoss?"+":""))]),e._v(" "),t("div",[e._v(e._s(s.name))])]),e._v(" "),t("div",{staticClass:"user__info user-info--phone"},[e._v(e._s(s.phone))])]),e._v(" "),s.employees.length>0?t("UsersList",{attrs:{users:s.employees}}):e._e()],1)}),0)},staticRenderFns:[]};var p={name:"App",data:function(){return{sort:{value:null,ascDirection:!0}}},components:{UsersList:t("VU/8")(m,d,!1,function(e){t("zzXh")},"data-v-6ced4558",null).exports},props:{users:{type:Array,required:!0}},methods:{setSortValue:function(e){this.sort.value===e?this.sort.ascDirection=!this.sort.ascDirection:(this.sort.value=e,this.sort.ascDirection=!0)},sortUsers:function(e){var s=this,t=JSON.parse(c()(e));return"name"===this.sort.value?t.sort(function(e,t){var r=e.name.localeCompare(t.name);return s.sort.ascDirection||(r*=-1),r}):"phone"===this.sort.value&&t.sort(function(e,t){var r=Number(e.phone.replace(/\D/g,""))-Number(t.phone.replace(/\D/g,""));return s.sort.ascDirection||(r*=-1),r}),t=t.map(function(e){var t=JSON.parse(c()(e));return t.employees.length>0&&(t.employees=s.sortUsers(t.employees)),t})}},computed:{sortedUsers:function(){return this.sortUsers(this.users)}}},v={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"phone-book"},[t("div",{staticClass:"phone-book__header"},[t("div",{staticClass:"phone-book__name",on:{click:function(s){return e.setSortValue("name")}}},[e._v("Имя")]),e._v(" "),t("div",{staticClass:"phone-book__phone",on:{click:function(s){return e.setSortValue("phone")}}},[e._v("Телефон")])]),e._v(" "),t("UsersList",{attrs:{users:e.sortedUsers}})],1)},staticRenderFns:[]};var h=t("VU/8")(p,v,!1,function(e){t("eJ8I")},"data-v-71afaf5c",null).exports,f={name:"UserAddForm",components:{AppBtn:l},data:function(){return{nameValue:null,phoneValue:null,bossValue:null,formErrors:[]}},props:{users:{type:Array},isShowForm:{type:Boolean,required:!0}},methods:{onCloseBtnClick:function(){this.$emit("close-user-add-from")},onSaveBtnClick:function(){this.validateFormData()&&(this.$emit("add-new-user",this.nameValue,this.phoneValue,this.bossValue),this.nameValue=null,this.phoneValue=null,this.bossValue=null)},validateFormData:function(){return this.formErrors=[],null!==this.nameValue&&""!==this.nameValue.trim()||this.formErrors.push('Не заполнено поле "Имя"'),null===this.phoneValue||""===this.phoneValue.trim()?this.formErrors.push('Не заполнено поле "Телефон"'):this.phoneValue.length<16&&this.formErrors.push("Телефонный номер введен не полностью"),0===this.formErrors.length}}},_={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowForm,expression:"isShowForm"}],staticClass:"form-wrapper"},[t("div",{staticClass:"form"},[t("div",{staticClass:"form__header"},[t("div",{staticClass:"form__title"},[e._v("Добавление пользователя")]),e._v(" "),t("AppBtn",{staticClass:"form__btn-close",on:{click:e.onCloseBtnClick}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"}},[t("path",{attrs:{fill:"#2c3e50",d:"M19.7 4.3c-0.4-0.4-1-0.4-1.4 0l-6 6-6-6c-0.4-0.4-1-0.4-1.4\n            0s-0.4 1 0 1.4l6 6-6 6c-0.4 0.4-0.4 1 0 1.4 0.4 0.4 1 0.4 1.4 0l6-6 6 6c0.4 0.4 1 0.4\n            1.4 0s0.4-1 0-1.4l-6-6 6-6c0.4-0.4 0.4-1 0-1.4z"}})])])],1),e._v(" "),t("div",{staticClass:"form__item form-item"},[t("label",{staticClass:"form-item__label",attrs:{for:"name"}},[e._v("Имя")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nameValue,expression:"nameValue"}],staticClass:"form-item__data",attrs:{type:"text",id:"name"},domProps:{value:e.nameValue},on:{input:[function(s){s.target.composing||(e.nameValue=s.target.value)},e.validateFormData]}})]),e._v(" "),t("div",{staticClass:"form__item form-item"},[t("label",{staticClass:"form-item__label",attrs:{for:"phone"}},[e._v("Телефон")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneValue,expression:"phoneValue"},{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"}],staticClass:"form-item__data",attrs:{type:"tel",placeholder:"+7 999 000 00 00",id:"phone"},domProps:{value:e.phoneValue},on:{input:[function(s){s.target.composing||(e.phoneValue=s.target.value)},e.validateFormData]}})]),e._v(" "),t("div",{staticClass:"form__item form-item"},[t("div",{staticClass:"form-item__label"},[e._v("Начальник")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.bossValue,expression:"bossValue"}],staticClass:"form-item__data",attrs:{name:"boss"},on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.bossValue=s.target.multiple?t:t[0]}}},[t("option",{staticClass:"form-item__value",domProps:{value:null}}),e._v(" "),e._l(e.users,function(s){return t("option",{key:s.id,staticClass:"form-item__value",domProps:{value:s.id}},[e._v("\n          "+e._s(s.name)+"\n        ")])})],2)]),e._v(" "),e._l(e.formErrors,function(s){return e.formErrors.length>0?t("div",{key:s,staticClass:"form__error-data"},[e._v("\n      "+e._s(s)+"\n    ")]):e._e()}),e._v(" "),t("AppBtn",{on:{click:e.onSaveBtnClick}},[e._v("Сохранить")])],2)])},staticRenderFns:[]};var C={name:"App",components:{PhoneBook:h,AppBtn:l,UserAddForm:t("VU/8")(f,_,!1,function(e){t("hPSW")},"data-v-3dae4369",null).exports},created:function(){this.users=JSON.parse(localStorage.getItem("users"))||[]},data:function(){return{users:[],isShowUserAddForm:!1}},methods:{openUserAddForm:function(){this.isShowUserAddForm=!0},closeUserAddForm:function(){this.isShowUserAddForm=!1},addNewUser:function(e,s,t){var r,n={id:(new Date).getTime(),name:e,phone:s,isBoss:!1,employees:[]};if(null!==t){var o=this.findBoss(this.users,t);o.isBoss=!0,o.employees.push(n)}else this.users.push(n);r=this.users,localStorage.setItem("users",c()(r))},findBoss:function(e,s){var t=this,r=e.find(function(e){return e.id===s});return void 0!==r?r:(e.forEach(function(e){if(e.employees.length>0){var n=t.findBoss(e.employees,s);void 0!==n&&(r=n)}}),r)},getUsersFlatList:function(e){var s=this,t=[];return e.forEach(function(e){t.push(e),e.employees.length>0&&(t=[].concat(a()(t),a()(s.getUsersFlatList(e.employees))))}),t}},computed:{sortedUsersFlatList:function(){return this.getUsersFlatList(this.users).sort(function(e,s){return e.name.localeCompare(s.name)})}}},V={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"center-container"},[t("AppBtn",{staticClass:"btn-add",on:{click:e.openUserAddForm}},[e._v("Добавить")]),e._v(" "),t("PhoneBook",{attrs:{users:e.users}}),e._v(" "),t("UserAddForm",{attrs:{users:e.sortedUsersFlatList,isShowForm:e.isShowUserAddForm},on:{"add-new-user":e.addNewUser,"close-user-add-from":e.closeUserAddForm}})],1)])},staticRenderFns:[]};var U=t("VU/8")(C,V,!1,function(e){t("CpP7"),t("nfcf")},"data-v-abc4234a",null).exports;r.a.use(n.a),r.a.config.productionTip=!1,new r.a({el:"#app",components:{App:U},template:"<App/>"})},eJ8I:function(e,s){},hPSW:function(e,s){},mrAD:function(e,s){},nfcf:function(e,s){},zzXh:function(e,s){}},["NHnr"]);
//# sourceMappingURL=app.5eeb5cbe9d361975b440.js.map